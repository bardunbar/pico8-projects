pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
-- tremble
-- dunbar games 2023

function init_lights(levels)
  -- cache sqrt
  _sqrt = {}
  for i = 0, 4096 do
    _sqrt[i] = sqrt(i)
  end

  -- read in color luts from sprite data, save to ram
  for lvl = 1, levels do
    local adr=0x4300 + lvl * 0x100
    local sprite_x = lvl - 1
    -- Since colors are stored as two colors per byte, create a lut of each possible color pair
    for top_idx = 0,15 do
      local top_c = sget(sprite_x, top_idx)
      local top_v = shl(top_c, 4)
      for bottom_idx = 0,15 do
        poke(adr, top_v + sget(sprite_x, bottom_idx))
        adr += 1
      end
    end
  end

end


function _init()
  init_lights(6)
end

function _update60()
end

function _draw()
  cls()
  map(0, 0, 0, 0, 16, 16)
end


__gfx__
000000000000000000000000000000007b3007b3000007b300000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000111000001100000000000000b3330b337b0b333100000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700221100002110000000000000b3330b33b330000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700033311000331100000000000033130333b3307bb300000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000422110004422100000000000031000010310b33300000000000000000000000000000000000000000000000000000000000000000000000000000000
007007005511100055110000000000000007b33070000b3300000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000066d5100066dd5100000000007b0b3330b333003100000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000776d100077776d5100000000b31003100331101100000000000000000000000000000000000000000000000000000000000000000000000000000000
000000008822100088842100000000000007b07b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000094221000999421000000000000b330b30000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000a9421000aa994210000000000b3331330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000bb331000bbb3310000000000700311310000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000ccd51000ccdd510000000000bb007b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000dd511000dd51100000000000b300b3330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000ee421000ee444210000000003331b3110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000f9421000fff9421000000000031100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0404040404040404040404040404040400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0405040404140404140414041404140400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404050404040505040404050404140400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040404040405140504040504140400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404140405040514040404050404140400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404140405040404040404050404040400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0414040505040514041404040404040400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404050404140504041404040414040400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0414050504040414040404050514040400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0414040505050404040414050414040400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0414040504141405050405040404050400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404140404050404040504040404040500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0414140404050404050404041414040500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0414040404040404050414040505040400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0414040504051404050505040514050500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0405140504051404040405040404040400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
